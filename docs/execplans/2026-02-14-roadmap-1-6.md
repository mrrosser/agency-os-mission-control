# ExecPlan: Roadmap Items 1-6 (2026-02-14)

## Goal
Ship the next production hardening + activation + outreach sequencing slice while keeping changes small, reversible, and well-tested.

This plan covers roadmap items:
1) Google OAuth verification + custom domain readiness (code + docs; console work is documented)
2) Activation funnel tightening (tour + Operations empty state)
3) Outreach workflow v1 sequencing (draft-first follow-ups) + org-level DNC list
4) Brand/UI consistency pass (use AfroGlyph variants where "default icons" dominate)
5) Maintainability refactors (incremental extraction of Operations page + lead-run worker)
6) Telemetry phase 3 (patch suggestions behind feature flag; no auto-deploy)

## DoD (Verification Gates)
- [x] `npm run lint` passes
- [x] `npm test` passes
- [x] `npm run build` passes
- [x] RT loop passes:
  - `powershell -NoProfile -ExecutionPolicy Bypass -File scripts/loop/run.ps1`
  - Evidence: `docs/reports/latest-run.md` ends with `end status=PASS`
- [x] Security scan updated:
  - `powershell -NoProfile -ExecutionPolicy Bypass -File "C:/CTO Projects/CodexSkills/.codex/skills/vuln-scan-remediate/scripts/scan_repo.ps1" -Path . -IncludeSecrets`
  - Evidence: `.security/reports/*` updated and reviewed
- [x] Docs updated (as applicable):
  - `docs/compliance/google-oauth-verification.md` (admin checklist)
  - `docs/reports/<today>-post-roadmap-audit.md` (delta + residual risks)

## In Scope (Deliverables)
- OAuth verification readiness:
  - [x] Add a clear in-app banner/CTA for admins when Drive scopes are blocked (access denied / app not verified).
  - [x] Add a concrete checklist doc for domain + OAuth consent screen + verification submission.
- Activation:
  - [x] Fix First Scan Tour to start at the correct step when prior steps are complete.
  - [x] Add a "Getting Started / Run first scan" empty state on Operations (no leads yet).
- Outreach sequencing:
  - [x] Add org-level Do-Not-Contact (DNC) list with API routes + basic UI management.
  - [x] Enforce DNC checks before any outreach channels (Gmail/SMS/calls/avatars).
  - [x] Ensure SMS-only lead runs do not require ElevenLabs (no false blocking).
  - [x] Create follow-up tasks (draft-first) and a safe worker endpoint to generate drafts (no send).
- Brand/UI:
  - [x] Replace core journey icons (Source/Score/Enrich/Script/Outreach/Follow-up/Booking) with `AfroGlyph`.
- Maintainability:
  - [x] Extract at least one "leaf" module from:
    - `app/dashboard/operations/page.tsx`
    - `app/api/lead-runs/[runId]/jobs/worker/route.ts`
  - [x] No behavior changes in extracted code (verified by tests).
- Telemetry phase 3:
  - [x] Extend telemetry triage to optionally add "patch suggestions" (code pointers + repro checklist) behind `TELEMETRY_TRIAGE_SUGGEST_PATCH=true`.
  - [x] No auto-merge, no auto-deploy, no secrets/PII in outputs.

## Out of Scope (Hard Stops)
- Purchasing a domain, Firebase custom domain configuration, and Google console verification actions (document only).
- Any autonomous code changes pushed by telemetry without human review.
- A "full rewrite" of Operations or worker route.

## Milestones
- [x] 1) Docs + UI for OAuth verification readiness (no console changes).
- [x] 2) Activation funnel adjustments (tour + Operations empty state).
- [x] 3) DNC list + enforcement + tests.
- [x] 4) Follow-up task scaffolding + worker route + tests (draft-only).
- [x] 5) Brand/UI icon consistency pass.
- [x] 6) Maintainability extraction (small modules only).
- [x] 7) Telemetry phase 3 flag + workflow update (safe defaults).
- [x] 8) Run audit gates + push + deploy.

## Risks / Notes
- Follow-up automation depends on Cloud Tasks configuration for timed execution; without it, tasks must be manually triggered from UI.
- OAuth verification is a process blocker for external Drive scopes; code can only improve UX + docs, not bypass Google policy.
- Secrets scan is currently a soft gate (gitleaks missing locally); `scan_repo.ps1 -IncludeSecrets` warns and continues.
