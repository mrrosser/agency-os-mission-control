services:
  openclaw-gateway:
    build:
      context: ..
      dockerfile: docker/Dockerfile
      args:
        OPENCLAW_VERSION: ${OPENCLAW_VERSION}
    image: ${OPENCLAW_IMAGE}
    container_name: openclaw-gateway
    restart: unless-stopped
    env_file:
      - .env
    environment:
      OPENCLAW_CONFIG_PATH: /home/openclaw/.openclaw/openclaw.json
    volumes:
      - ../data/openclaw:/home/openclaw/.openclaw
    ports:
      - "127.0.0.1:${OPENCLAW_PORT}:18789"
    healthcheck:
      test: ["CMD", "/bin/bash", "-lc", "echo > /dev/tcp/127.0.0.1/18789"]
      interval: 30s
      timeout: 5s
      retries: 5
